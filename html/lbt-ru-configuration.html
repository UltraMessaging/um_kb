<html><head><title>LBT-RU Configuration</title>
<link href="../doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body bgcolor="#ffffff">
<div id="doc-content">
<div class="contents">
<div class="textblock">
<a href="https://informatica.com"><img src="../infa_logo.png" width="200" height="69" alt="Informatica"/></a>
<br/>
<p><b>Ultra Messaging Knowledge Base</b></p>
<hr>
<p><a id="lbt-ru-configuration"></a></p>
<h1>LBT-RU Configuration</h1>
<!-- mdtoc-start -->
<p>• <a href="#lbt-ru-configuration">LBT-RU Configuration</a><br />
    • <a href="#introduction">Introduction</a><br />
    • <a href="#high-level-considerations">High-Level Considerations</a><br />
    • <a href="#nak-storms">NAK Storms</a></p>
<!-- TOC created by './mdtoc.pl kb/lbt-ru-configuration.md' (see https://github.com/fordsfords/mdtoc) -->
<!-- mdtoc-end -->
<p><a id="introduction"></a></p>
<h2>Introduction</h2>
<p>The Ultra Messaging LBT-RU transport protocol uses unicast UDP for messaging.
The UDP protocol does not guarantee packet ordering or provide automatic
retransmission of lost packets, so UM's LBT-RU protocol adds those features.</p>
<p>Starting in UM version 6.16, the DRO peer link now has a UDP feature called
&quot;<a href="https://ultramessaging.github.io/currdoc/doc/Gateway/droarchitecture.html#udppeerlink">UDP Peer Link</a>&quot;
which leverages the same codebase as LBT-RU,
and is therefore configured roughly the same.
However, there are some issues unique to DRO peer links that deserve special consideratino.</p>
<p><a id="high-level-considerations"></a></p>
<h2>High-Level Considerations</h2>
<p>There is no &quot;one size fits all&quot; configuration for LBT-RU.
We've set most defaults to suit a wide range of use cases,
but you should still evaluate these settings based on your specific needs.</p>
<p>Here are the characteristics of your use case that you should identify:</p>
<ol>
<li>Expected average and peak message rates required.</li>
<li>Expected avarage and maximum message sizes being sent.</li>
<li>Expected maximum round-trip network latency between a publisher and a subscriber.
This can typically be ignored within a single data center,
but in the case of international WAN hops, round-trip latencies can grow to several hundred milliseconds.</li>
<li>Network bandwidth limitations. This can typically be assumed to be the servers' network connection
speed (usually 10 gig), but can be different for international WAN hops where data streams must be limited
below the servers' network connection speed. (Note that this is something that the TCP protocol adjusts
for dynamically. UDP does not.)</li>
</ol>
<p><a id="nak-storms"></a></p>
<h2>NAK Storms</h2>
<p>Any NAK-based UDP protocol (such as Informatica's LBT-RM and LBT-RU) carry some risk of
a &quot;NAK storm&quot;, which is defined as a condition where the lost packet recovery mechanisms
overload the network and/or host infrastructure such that the packet recovery work itself
introduces packet loss. This can produce a self-reinforcing feedback loop where loss triggers
loss recovery, which causes additional loss, which triggers more loss recovery, etc.</p>
<p>It is important to differentiate between successful lost packet recovery and a NAK storm,
given that both can have significant numbers of NAKs sent.
A packet loss incident is generally caused by a temporary burst of network traffic that
overloads a network device, a hosts's IP drivers, or an application.
Durign this traffic overload, packet loss is inevitable.
The question is: what happens when the traffic burst subsides and network traffic returns
to normal?</p>
<p>In a successful lost packet recovery, NAKs can continue for many hundreds of milliseconds,
possibly even many seconds.
But importantly, during this recovery period, there should be no new packets lost (or
very few).
The lack of continued packet loss after the traffic burst subsides is a sign that UM is
proceeding normally with lost packet recovery.</p>
<p>However, if high packet loss persists after</p>
<hr>
<p>KB <a href="home.html">Home</a> | <a href="index.html">Index</a></p>
<p>UM <a href="https://ultramessaging.github.io/">Home</a></p>
<p>See <a href="https://ultramessaging.github.io/#notices">Notices</a> for important information.
</div></div></div>
</body></html>
